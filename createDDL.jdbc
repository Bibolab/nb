CREATE TABLE _users (ID  SERIAL NOT NULL, default_lang INTEGER, EMAIL VARCHAR(64), i_su BOOLEAN, LOGIN VARCHAR(64) UNIQUE, PWD VARCHAR(255), PWDHASH VARCHAR(255), reg_date TIMESTAMP NOT NULL, SLACK VARCHAR(64), STATUS INTEGER, THEME VARCHAR(255), XMPP VARCHAR(64), PRIMARY KEY (ID))
CREATE TABLE _apps (id UUID, AUTHURL VARCHAR(255), author BIGINT NOT NULL, CODE VARCHAR(16), DEFAULTURL VARCHAR(255), DEPENDENCIES BYTEA, form VARCHAR(64) NOT NULL, ftsearch_fields BYTEA, is_on BOOLEAN, localized_descr BYTEA, localized_name BYTEA, NAME VARCHAR(128) UNIQUE, POSITION INTEGER, reg_date TIMESTAMP NOT NULL, PRIMARY KEY (id))
CREATE TABLE _langs (id UUID, author BIGINT NOT NULL, CODE VARCHAR(7) UNIQUE, form VARCHAR(64) NOT NULL, localized_name BYTEA, NAME VARCHAR(128) UNIQUE, reg_date TIMESTAMP NOT NULL, PRIMARY KEY (id))
CREATE TABLE _sentences (id UUID, author BIGINT NOT NULL, form VARCHAR(64) NOT NULL, HITS INTEGER, localized_name BYTEA, NAME VARCHAR(128), reg_date TIMESTAMP NOT NULL, PRIMARY KEY (id))
CREATE TABLE attachments (id UUID, AUTHOR BIGINT, FIELDNAME VARCHAR(255), FILE BYTEA, FORM VARCHAR(255), REALFILENAME VARCHAR(255), reg_date TIMESTAMP NOT NULL, PRIMARY KEY (id))
CREATE TABLE reading_marks (ID  SERIAL NOT NULL, DOCID UUID, mark_date TIMESTAMP, user_id BIGINT, PRIMARY KEY (ID))
CREATE TABLE _allowed_apps (app_id BIGINT NOT NULL, user_id UUID, PRIMARY KEY (app_id, user_id))
ALTER TABLE _allowed_apps ADD CONSTRAINT FK__allowed_apps_app_id FOREIGN KEY (app_id) REFERENCES _users (ID)
ALTER TABLE _allowed_apps ADD CONSTRAINT FK__allowed_apps_user_id FOREIGN KEY (user_id) REFERENCES _apps (id)
